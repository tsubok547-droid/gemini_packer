# Gemini Packer  packer️



大規模言語モデル（LLM）へソースコードを渡す際の、面倒な準備作業を自動化するためのGUIアプリケーションです。プロジェクトのファイルを選択し、複数のZIPファイルとAIへの指示プロンプトをワンクリックで生成します。

---
## ## アプリの仕様と設計思想

このアプリケーションは、特に**ユーザーの選択の意図を厳密に保持する**ことを重視して設計されています。

* **フォルダ選択とファイル選択の区別**:
    フォルダ`A`にファイル`B`が1つだけ存在する状況で、
    1.  **ファイル`B`を選択した場合**: キャッシュには「ファイル`B`が選択された」という情報のみが記録されます。将来、フォルダ`A`に新しいファイル`C`が追加されても、キャッシュを読み込んだ際に選択されるのはファイル`B`だけです。
    2.  **フォルダ`A`を選択した場合**: キャッシュには「フォルダ`A`が選択された」という情報が記録されます。将来、フォルダ`A`の構成が変更（ファイル`C`が追加など）されても、キャッシュを読み込むとフォルダ`A`とその時点でのすべての子孫が選択状態になります。

* **状態管理**:
    * ユーザーがアイテムを直接クリックした場合のみ、そのアイテムは「全選択 (`checked`)」状態になります。
    * 子アイテムが選択された結果、親フォルダは「部分的選択 (`partial`)」状態になるだけで、自動的に「全選択」に昇格することはありません。
    * この非対称な状態管理により、ユーザーの明確な意図だけを保存・復元することが可能になっています。

---
## ## 主な機能

* 📁 **フォルダのドラッグ＆ドロップ**: プロジェクトフォルダをウィンドウにドラッグ＆ドロップするだけで、ファイルツリーを瞬時に読み込みます。
* ✅ **厳密なファイル選択**: 上記の仕様に基づいた、直感的かつ正確な三態チェックボックス（全選択、部分的選択、非選択）を提供します。
* 💾 **永続的な選択キャッシュ**: 現在の選択状態を`.json`ファイルに保存・復元します。プロジェクトの構成が変化しても、ユーザーの選択意図を正確に再現します。
* 📜 **構成ファイルの生成**: 選択したファイル/フォルダの階層構造を`directory_structure.txt`として出力します。
* 🤖 **ZIPとプロンプトの自動生成**: 選択したファイルを分割して複数のZIPアーカイブを生成し、AIとの対話をスムーズに進めるための`prompts.txt`を同時に出力します。

---
## ## 操作方法

### ### 実行ファイル (`.exe`) を使う場合

1.  `gemini_packer.exe`をダブルクリックして起動します。
2.  分析したいプロジェクトフォルダをウィンドウ上にドラッグ＆ドロップします。
3.  ファイルツリーでAIに渡したいファイルやフォルダのチェックボックスをクリックして選択します。
4.  必要に応じて各ボタンを使用します。
    * **💾 現在の選択を保存**: 現在のチェック状態をプロジェクトフォルダ内の`.gemini_packer_cache.json`に保存します。
    * **📜 構成ファイル生成**: 現在選択しているアイテムのツリー構造を`directory_structure.txt`に出力します。
    * **✅ 選択したファイルをZIP化**: 選択したファイルを`gemini_files`フォルダ内にZIPファイル群と`prompts.txt`として出力します。

### ### ソースコードから直接実行する場合

1.  **前提条件**:
    * Python 3 がインストールされていること。
2.  **セットアップ**:
    * このリポジトリをクローンまたはダウンロードします。
    * ターミナルで以下のコマンドを実行し、必要なライブラリをインストールします。
        ```bash
        pip install tkinterdnd2
        ```
3.  **実行**:
    * ターミナルで以下のコマンドを実行してアプリケーションを起動します。
        ```bash
        python gemini_packer.py
        ```
## ## gitに反映しないファイルの設定

.gitignoreに以下のファイルを追加してください。
# Gemini Packer
.gemini_packer_cache.json
gemini_files/


---
## ## ビルド方法 (自分用の.exeを作成する)

1.  **PyInstallerのインストール**:
    ```bash
    pip install pyinstaller
    ```
2.  **ビルドコマンドの実行**:
    プロジェクトのルートディレクトリ（`gemini_packer.py`と`assets`フォルダがある場所）で、以下のコマンドを実行します。
    ```bash
    pyinstaller --onefile --windowed --add-data "assets;assets" gemini_packer.py
    ```
3.  **完成**:
    コマンドが完了すると`dist`フォルダが作成され、その中に`gemini_packer.exe`が格納されています。

---
## ## ライセンス

このプロジェクトはMITライセンスの下で公開されています。